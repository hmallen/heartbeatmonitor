DEBUG:__main__:slack_channel_heartbeat: heartbeat
DEBUG:__main__:slack_channel_testing: testing
DEBUG:__main__:self.slack_bot_user: TeslaBot
DEBUG:__main__:self.slack_bot_icon: http://teslabot.s3-website-us-east-1.amazonaws.com/tesla.png
DEBUG:__main__:channel_list.get('ok'): True
DEBUG:__main__:chan['name']: boterrors
DEBUG:__main__:chan['name']: bottesting
DEBUG:__main__:chan['name']: code
DEBUG:__main__:chan['name']: general
DEBUG:__main__:chan['name']: heartbeat
DEBUG:__main__:chan['name']: machinelearning
DEBUG:__main__:chan['name']: marketalerts
DEBUG:__main__:chan['name']: marketcap
DEBUG:__main__:chan['name']: newmarkets
DEBUG:__main__:chan['name']: testing
DEBUG:__main__:Slack channel for heartbeat alerts: #testing (CAX1A4XU1)
DEBUG:__main__:Starting monitor process.
INFO:__main__:Waiting for monitor to become active.
INFO:__mp_main__:Start monitor triggered.
DEBUG:json_datetime_converter.json_datetime_converter:json_data_raw: {'alert_reset_interval': 30.0, 'flatline_last': '2018-06-11T17:03:31.869593', 'heartbeat_last': '2018-06-11T17:04:01.869593', 'heartbeat_timeout': 30.0, 'module': 'Testing'}
INFO:__main__:Monitor ready.
DEBUG:__main__:Sending monitor startup status message.
DEBUG:__main__:alert_result['Exception']: False
DEBUG:__main__:alert_result['result']: {'ok': True, 'channel': 'CAX1A4XU1', 'ts': '1528754643.000257', 'message': {'text': '*Heartbeat monitor status has changed.*', 'username': 'TeslaBot', 'icons': {'image_48': 'https://slack-files2.s3-us-west-2.amazonaws.com/bot_icons/2018-05-13/362192600816_48.png'}, 'bot_id': 'BAJC6EU6S', 'attachments': [{'fallback': 'Heartbeat monitor status has changed.', 'pretext': 'Central heartbeat monitor *_ACTIVATED_* at 17:04:04, 06-11-18.', 'title': 'Module: Central Monitor', 'id': 1, 'color': 'FFFF00'}], 'type': 'message', 'subtype': 'bot_message', 'ts': '1528754643.000257'}, 'headers': {'Content-Type': 'application/json; charset=utf-8', 'Content-Length': '368', 'Connection': 'keep-alive', 'Date': 'Mon, 11 Jun 2018 22:04:03 GMT', 'Server': 'Apache', 'Expires': 'Mon, 26 Jul 1997 05:00:00 GMT', 'X-Content-Type-Options': 'nosniff', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'Referrer-Policy': 'no-referrer', 'Cache-Control': 'private, no-cache, no-store, must-revalidate', 'X-OAuth-Scopes': 'identify,bot:basic', 'Pragma': 'no-cache', 'X-Accepted-OAuth-Scopes': 'chat:write:bot,post', 'X-XSS-Protection': '0', 'X-Slack-Req-Id': '90ff286e-8a5b-4e3e-bd38-da28458de28b', 'X-Slack-Backend': 'h', 'Vary': 'Accept-Encoding', 'Content-Encoding': 'gzip', 'Access-Control-Allow-Origin': '*', 'X-Via': 'haproxy-www-k2c1', 'X-Cache': 'Miss from cloudfront', 'Via': '1.1 5bd9bab11fd8ad5d2dea405e259e8910.cloudfront.net (CloudFront)', 'X-Amz-Cf-Id': 'lOqWEWKTiPYLkvJ8Ag7z1BKqRIFvKWk15WAjSO9xGNsRVBJ7c_aQig=='}}
DEBUG:__main__:Monitor active at 17:04:04, 06-11-18.
DEBUG:json_datetime_converter.json_datetime_converter:json_data_raw: {'alert_reset_interval': 30.0, 'flatline_last': '2018-06-11T17:03:31.869593', 'heartbeat_last': '2018-06-11T17:04:07.619788', 'heartbeat_timeout': 30.0, 'module': 'Testing'}
DEBUG:json_datetime_converter.json_datetime_converter:json_data_raw: {'alert_reset_interval': 30.0, 'flatline_last': '2018-06-11T17:03:31.869593', 'heartbeat_last': '2018-06-11T17:04:12.861386', 'heartbeat_timeout': 30.0, 'module': 'Testing'}
DEBUG:json_datetime_converter.json_datetime_converter:json_data_raw: {'alert_reset_interval': 30.0, 'flatline_last': '2018-06-11T17:03:31.869593', 'heartbeat_last': '2018-06-11T17:04:12.861386', 'heartbeat_timeout': 30.0, 'module': 'Testing'}
DEBUG:json_datetime_converter.json_datetime_converter:json_data_raw: {'alert_reset_interval': 30.0, 'flatline_last': '2018-06-11T17:03:31.869593', 'heartbeat_last': '2018-06-11T17:04:12.861386', 'heartbeat_timeout': 30.0, 'module': 'Testing'}
DEBUG:json_datetime_converter.json_datetime_converter:json_data_raw: {'alert_reset_interval': 30.0, 'flatline_last': '2018-06-11T17:03:31.869593', 'heartbeat_last': '2018-06-11T17:04:12.861386', 'heartbeat_timeout': 30.0, 'module': 'Testing'}
DEBUG:json_datetime_converter.json_datetime_converter:json_data_raw: {'alert_reset_interval': 30.0, 'flatline_last': '2018-06-11T17:03:31.869593', 'heartbeat_last': '2018-06-11T17:04:12.861386', 'heartbeat_timeout': 30.0, 'module': 'Testing'}
DEBUG:__main__:Monitor active at 17:04:34, 06-11-18.
DEBUG:json_datetime_converter.json_datetime_converter:json_data_raw: {'alert_reset_interval': 30.0, 'flatline_last': '2018-06-11T17:03:31.869593', 'heartbeat_last': '2018-06-11T17:04:12.861386', 'heartbeat_timeout': 30.0, 'module': 'Testing'}
DEBUG:json_datetime_converter.json_datetime_converter:json_data_raw: {'alert_reset_interval': 30.0, 'flatline_last': '2018-06-11T17:03:31.869593', 'heartbeat_last': '2018-06-11T17:04:12.861386', 'heartbeat_timeout': 30.0, 'module': 'Testing'}
DEBUG:__mp_main__:alert_result['Exception']: False
DEBUG:__mp_main__:alert_result['result']: {'ok': True, 'channel': 'CAX1A4XU1', 'ts': '1528754682.000470', 'message': {'text': '*WARNING: No heartbeat detected!*', 'username': 'TeslaBot', 'icons': {'image_48': 'https://slack-files2.s3-us-west-2.amazonaws.com/bot_icons/2018-05-13/362192600816_48.png'}, 'bot_id': 'BAJC6EU6S', 'attachments': [{'fallback': 'WARNING: No heartbeat detected!', 'pretext': '*Last heartbeat:* 0.51 minutes ago.', 'title': 'Module: Testing', 'id': 1, 'color': 'FF0000'}], 'type': 'message', 'subtype': 'bot_message', 'ts': '1528754682.000470'}, 'headers': {'Content-Type': 'application/json; charset=utf-8', 'Content-Length': '349', 'Connection': 'keep-alive', 'Date': 'Mon, 11 Jun 2018 22:04:42 GMT', 'Server': 'Apache', 'Expires': 'Mon, 26 Jul 1997 05:00:00 GMT', 'X-Content-Type-Options': 'nosniff', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'Referrer-Policy': 'no-referrer', 'Cache-Control': 'private, no-cache, no-store, must-revalidate', 'X-OAuth-Scopes': 'identify,bot:basic', 'Pragma': 'no-cache', 'X-Accepted-OAuth-Scopes': 'chat:write:bot,post', 'X-XSS-Protection': '0', 'X-Slack-Req-Id': 'f2c43379-3fc2-4249-8189-d2c5376480b9', 'X-Slack-Backend': 'h', 'Vary': 'Accept-Encoding', 'Content-Encoding': 'gzip', 'Access-Control-Allow-Origin': '*', 'X-Via': 'haproxy-www-gqys', 'X-Cache': 'Miss from cloudfront', 'Via': '1.1 ec4375358288b9efc2e39724f9fffdc4.cloudfront.net (CloudFront)', 'X-Amz-Cf-Id': 'X4A-36ovwM7bjyshBgyD1FKQMf_Ndy8ix3oOF_Zwp_l4_-DFwhovLg=='}}
DEBUG:json_datetime_converter.json_datetime_converter:json_data_converted[data]: 30.0
DEBUG:json_datetime_converter.json_datetime_converter:[convert_datetime] datetime.datetime
DEBUG:json_datetime_converter.json_datetime_converter:json_data_converted[data]: 2018-06-11T17:04:44.038032
DEBUG:json_datetime_converter.json_datetime_converter:[convert_datetime] datetime.datetime
DEBUG:json_datetime_converter.json_datetime_converter:json_data_converted[data]: 2018-06-11T17:04:12.861386
DEBUG:json_datetime_converter.json_datetime_converter:[convert_datetime] datetime.timedelta
DEBUG:json_datetime_converter.json_datetime_converter:json_data_converted[data]: 30.0
DEBUG:json_datetime_converter.json_datetime_converter:json_data_converted[data]: Testing
DEBUG:json_datetime_converter.json_datetime_converter:json_data_raw: {'alert_reset_interval': 30.0, 'flatline_last': '2018-06-11T17:04:44.038032', 'heartbeat_last': '2018-06-11T17:04:12.861386', 'heartbeat_timeout': 30.0, 'module': 'Testing'}
DEBUG:__mp_main__:Heartbeat timeout passed, but alert reset interval not reached. Skipping slack alert.
INFO:__main__:No heartbeat files found in directory. Starting 30 second shutdown timer.
DEBUG:__main__:Sending monitor timeout status message.
DEBUG:__main__:alert_result['Exception']: False
DEBUG:__main__:alert_result['result']: {'ok': True, 'channel': 'CAX1A4XU1', 'ts': '1528754703.000504', 'message': {'text': '*Heartbeat monitor status has changed.*', 'username': 'TeslaBot', 'icons': {'image_48': 'https://slack-files2.s3-us-west-2.amazonaws.com/bot_icons/2018-05-13/362192600816_48.png'}, 'bot_id': 'BAJC6EU6S', 'attachments': [{'fallback': 'Heartbeat monitor status has changed.', 'text': 'Shutting down central heartbeat monitor in 30 seconds.', 'pretext': 'No heartbeat files detected at 17:05:04, 06-11-18.', 'title': 'Module: Central Monitor', 'id': 1, 'color': 'FFFF00'}], 'type': 'message', 'subtype': 'bot_message', 'ts': '1528754703.000504'}, 'headers': {'Content-Type': 'application/json; charset=utf-8', 'Content-Length': '392', 'Connection': 'keep-alive', 'Date': 'Mon, 11 Jun 2018 22:05:03 GMT', 'Server': 'Apache', 'Expires': 'Mon, 26 Jul 1997 05:00:00 GMT', 'X-Content-Type-Options': 'nosniff', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'Referrer-Policy': 'no-referrer', 'Cache-Control': 'private, no-cache, no-store, must-revalidate', 'X-OAuth-Scopes': 'identify,bot:basic', 'Pragma': 'no-cache', 'X-Accepted-OAuth-Scopes': 'chat:write:bot,post', 'X-XSS-Protection': '0', 'X-Slack-Req-Id': '9408ff5b-bc7d-48ec-9908-60700efefb1c', 'X-Slack-Backend': 'h', 'Vary': 'Accept-Encoding', 'Content-Encoding': 'gzip', 'Access-Control-Allow-Origin': '*', 'X-Via': 'haproxy-www-928b', 'X-Cache': 'Miss from cloudfront', 'Via': '1.1 8cf3b0c0dbbd56e2b65caa29e0eea872.cloudfront.net (CloudFront)', 'X-Amz-Cf-Id': 'qeBMoPkifF8xbrrZZRo9ZVkkliePy9nKbkirImaCUa5Mi1QLlLOOJQ=='}}
INFO:__main__:Signalling monitor to shutdown.
INFO:__mp_main__:Kill monitor signalled.
DEBUG:__mp_main__:Removing monitor active file.
DEBUG:__mp_main__:monitor_state[0]: 0
DEBUG:__main__:Monitor stopped successfully.
DEBUG:__main__:Sending monitor shutdown status message.
DEBUG:__main__:alert_result['Exception']: False
DEBUG:__main__:alert_result['result']: {'ok': True, 'channel': 'CAX1A4XU1', 'ts': '1528754739.000069', 'message': {'text': '*Heartbeat monitor status has changed.*', 'username': 'TeslaBot', 'icons': {'image_48': 'https://slack-files2.s3-us-west-2.amazonaws.com/bot_icons/2018-05-13/362192600816_48.png'}, 'bot_id': 'BAJC6EU6S', 'attachments': [{'fallback': 'Heartbeat monitor status has changed.', 'pretext': 'Central heartbeat monitor *_DEACTIVATED_* at 17:05:40, 06-11-18.', 'title': 'Module: Central Monitor', 'id': 1, 'color': 'FFFF00'}], 'type': 'message', 'subtype': 'bot_message', 'ts': '1528754739.000069'}, 'headers': {'Content-Type': 'application/json; charset=utf-8', 'Content-Length': '370', 'Connection': 'keep-alive', 'Date': 'Mon, 11 Jun 2018 22:05:39 GMT', 'Server': 'Apache', 'Expires': 'Mon, 26 Jul 1997 05:00:00 GMT', 'X-Content-Type-Options': 'nosniff', 'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload', 'Referrer-Policy': 'no-referrer', 'Cache-Control': 'private, no-cache, no-store, must-revalidate', 'X-OAuth-Scopes': 'identify,bot:basic', 'Pragma': 'no-cache', 'X-Accepted-OAuth-Scopes': 'chat:write:bot,post', 'X-XSS-Protection': '0', 'X-Slack-Req-Id': '8e859c9e-db46-45fc-8d76-93b893dee640', 'X-Slack-Backend': 'h', 'Vary': 'Accept-Encoding', 'Content-Encoding': 'gzip', 'Access-Control-Allow-Origin': '*', 'X-Via': 'haproxy-www-azqr', 'X-Cache': 'Miss from cloudfront', 'Via': '1.1 52225573c1a940328665dd7134bf391d.cloudfront.net (CloudFront)', 'X-Amz-Cf-Id': 'T1ItlFytZQLR9fLiP-4izxXQkR1lu26xPJE3-vAt57AGd8jT1Aw34Q=='}}
INFO:__main__:Terminating monitor process.
INFO:__main__:Joining terminated process.
INFO:__main__:Archiving monitor log file.
